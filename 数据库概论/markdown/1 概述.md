# **一、数据库系统概述**

## 1. 四个基本概念

### （1）数据（Data）

- 是数据库中存储和管理的基本对象
- 数据的定义 描述事物的符号记录
- 数据的含义/数据的语义，数据与其语义是不可分的。

### （2）数据库（Database）

- 数据库的定义：长期(永久)储存在计算机内、有组织的、可共享的大量数据的集合。
- 数据库的基本特征：数据按一定的数据模型组织、描述和储存，可为各种用户共享、冗余度较小、数据独立性较高、易扩展

### （3）数据库管理系统（DBMS）

- 数据库管理系统定义
    - 是位于用户与操作系统之间的一层数据管理软件是基础软件.
- 数据库管理系统功能
    - 科学地组织和存储数据、高效地获取和维护数据.
    - 建立在操作系统之上，独立于操作系统

功能：

- 数据定义功能
    - 提供数据定义语言（DDL）
    - 定义数据库中的数据对象的组成与结构
- 数据组织、存储和管理
    - 分类组织、存储和管理各种数据
    - 确定组织数据的文件结构和存取方式
    - 实现数据之间的联系
    - 提供多种存取方法提高存取效率
- 数据操纵功能
    - 提供数据操纵语言（DML）
    - 实现对数据库的基本操作 （查询、插入、删除和修改）
- 数据库的事务管理和运行管理
    - 数据库在建立、运行和维护时由数据库管理系统统一管理和控制
    - 保证事务的正确运行
    - 保证数据的安全性、完整性、多用户对数据的并发使用
    - 发生故障后的系统恢复
- 数据库的建立和维护功能
    - 数据库初始数据的装载和转换
    - 数据库转储、恢复功能
    - 数据库的重组织
    - 性能监视、分析
- 其它功能
    - 数据库管理系统与网络中其它软件系统的通信
    - 数据库管理系统之间的数据转换
    - 异构数据库之间的互访和互操作

### （4）数据库系统（Database System）

- 数据库
- 数据库管理系统(及其应用开发工具)
- 应用程序
- 数据库管理员(DBA)

## 2. 数据管理技术的产生与发展

- 数据管理
    - 即对数据进行分类、组织、编码、存储、检索和维护
- 数据管理技术的发展过程
    - 人工管理阶段（20世纪50年代中之前） -> 文件系统阶段（20世纪50年代末--60年代中） -> 数据库系统阶段（20世纪60年代末--现在）
    - 人工管理特点
    - 文件系统特点
    - 是操作系统的一部分，不是独立的软件 

## 3. 数据库系统的特点

### （1）数据结构化

不仅描述数据本身，还描述数据之间的联系，数据库系统实现整体数据的结构化

### （2）数据的共享性高，冗余度低且易扩充

数据不再面向某个应用而是面向整个系统 数据可以被多个用户、多个应用共享数据

### （3）数据独立性高

- 逻辑独立性： 指用户的应用程序与数据库的逻辑结构是相互独立的。数据的逻辑结构改变了，用户程序也可以不变
- 物理独立性： 指用户的应用程序与存储在磁盘上的数据库中数据是相互独立的。当数据的物理存储改变了，应用程序不用改变

数据的独立性由DBMS的二级映像功能保证

### （4）数据由数据库管理系统统一管理和控制 

- **数据库管理系统提供的数据控制功能**
    - 数据的安全性（Security）
    - 数据的完整性（Integrity）
    - 并发（Concurrency）
    - 数据库恢复（Recovery） 

# **二、数据模型**

## 1. 概念模型

数据模型是对现实世界数据特征的抽象，就是现实世界的模拟。

数据模型是数据库系统的核心和基础

### （1）概念模型的组成要素

- 实体（Entity）：实体型的一个具体例子，客观存在并可相互区别的事物称为实体
- 属性（Attribute）：实体具有的特性称为属性
- 域(Domain) ：属性的取值范围称为该属性的域
- 码（Key）：唯一标识实体的属性集称为码。
- 实体型（Entity Type）：一类实体 例如：选课(学号，课程名，成绩) 
- 实体集（Entity Set）：同一类型实体的集合称为实体集
- 联系（Relationship）：内部的联系指组成实体的各属性之间的联系实体之间的联系通常是指不同实体集之间的联系，联系有一对一、一对多和多对多等多种类型

### （2）概念模型的ER方法

- 实体联系方法：

    用E-R图来描述现实世界的概念模型 E-R方法也称为E-R模型

    - 实体-矩形框
    - 联系-菱形框

- 每一个实体一定要画上属性

- 联系和联系之间是一对一还是多对多一定要画上

## 2. 数据模型的组成要素

- 数据结构：类型、内容、性质，与数据的联系有关，静态的
- 数据操作：各种对象的实例操作集合，以及有关规则，增删改查
- 数据的完整性约束条件：一组完整性规则的集合
- 数据模型对操作的定义：操作的确切含义、操作符号、操作规则、实现的语言，是动态的

## 3. 逻辑与物理模型

（1）二者区别

逻辑模型主要包括网状模型、层次模型、关系模型、面向对象数据模型、对象关系数据模型、半结构化数据模型等。 

物理模型是对数据最底层的抽象，描述数据在系统内部的表示方式和存取方法，在磁盘或磁带上的存储方式和存取方法。

（2）层次模型与网状模型

层次模型实际上是网状模型的一个特例

（3）关系模型

**优点**

- 建立在严格的数学概念的基础上
- 概念单一
- 实体和各类联系都用关系来表示
- 对数据的检索和更新结果也是关系
- 关系模型的存取路径对用户透明
- 具有更高的数据独立性，更好的安全保密性
- 简化了程序员的工作和数据库开发建立的工作

**缺点**

- 由于存取路径对用户透明，查询效率往往不如格式化数据模型
- 为提高性能，必须对用户的查询请求进行优化，增加了开发数据库管理系统的难度

（4）关系模型的数据结构

- 关系（Relation）：一个关系对应通常说的一张表
- 元组（Tuple）：表中的一行即为一个元组
- 属性（Attribute）：表中一列为一个属性，叫属性名
- 码（Key）：也称码键。指可以唯一确定一个元组的属性组
- 域（Domain）：是一组具有相同数据类型的值的集合。属性的取值范围来自某个域。
- 分量：元组中的一个属性值，只能是一个属性值，不能够表中有表
- 关系模式：对关系的描述包括，形如：关系名(属性1，属性2，…，属性n)

<img src="https://img2020.cnblogs.com/i-beta/1861185/202003/1861185-20200327143200130-1693879551.png" alt="1861185-20200327143200130-1693879551" style="zoom:35%;" />

（5）关系模型的操作

数据操作是集合操作，操作对象和操作结果都是关系，操作主要有更删改查

存取路径对用户隐蔽，用户只要指出“干(找)什么”，不必详细说明“怎么干(找)”，从而大大提高了数据的独立性，提高了用户生产率

（6）关系模型的完整性约束

- 实体完整性 对每一个实体，能够保证唯一性
- 参照完整性 
- 用户定义的完整性

# **三、数据库系统结构**

## 1. 数据库系统模式的概念

型（Type） 对某一类数据的结构和属性的说明

值（Value） 是型的一个具体赋值

**模式（也称逻辑模式，即型）**

-  数据库中全体数据的逻辑结构和特征的描述
-  所有用户的公共数据视图
-  是型的描述，不涉及具体值
-  反映的是数据的结构及其联系
-  模式是相对稳定的
-  一个数据库只有一个模式

**实例（模式的一个具体值）**

-  反映数据库某一时刻的状态
-  同一个模式可以有很多实例
-  实例随数据库中的数据的更新而变动

## 2. 三级模式系统结构

 外模式（External Schema）-> 模式（Schema） -> 内模式（Internal Schema）

<img src="https://img2020.cnblogs.com/i-beta/1861185/202003/1861185-20200327144451382-616018415.png" alt="1861185-20200327144451382-616018415" style="zoom:50%;" />

 

**外模式不唯一，有多少个外模式就有多少个外模式/模式映像**

**模式和内模式是唯一的，只有一个模式/内模式映像**

### （1）模式（逻辑模式

- 即全局逻辑结构是数据库的中心与关键
- 独立于数据库的其他层次
- 设计数据库模式结构时应首先确定数据库的逻辑模式

**模式的地位**

-  是数据库系统模式结构的中间层 与数据的物理存储细节和硬件环境无关
-  与具体的应用程序、开发工具及高级程序设计语言无关
-  全体数据的逻辑表示

**模式的定义**

- 数据的逻辑结构（数据项的名字、类型、取值范围等）
- 数据之间的联系
- 数据有关的安全性、完整性要求

### （2）外模式（也称子模式或用户模式）

- 面向具体的应用程序
- 定义在逻辑模式之上
- 独立于存储模式和存储设备
- 当应用需求发生较大变化，相应外模式不能满足其视图要求时，该外模式就得做相应改动，设计外模式时应充分考虑到应用的扩充性

数据库用户（包括应用程序员和最终用户）能够看见和使用的局部数据的逻辑结构和特征的描述

数据库用户的数据视图，是与某一应用有关的数据的逻辑表示

**外模式的地位：介于模式与应用之间**

模式与外模式的关系：一对多

- 外模式通常是模式的子集
- 一个数据库可以有多个外模式。反映了不同的用户的应用需求、看待数据的方式、对数据保密的要求
- 即使对模式中同一数据，在外模式中的结构、类型、长度、保密级别等都可以不同

外模式与应用的关系：一对多

- 同一外模式也可以为某一用户的多个应用系统所使用
- 一个应用程序只能使用一个外模式

**外模式的用途**

- 保证数据库安全性的一个有力措施
- 每个用户只能看见和访问所对应的外模式中的数据

### （3）内模式（也称存储模式）

- 依赖于它的全局逻辑结构
- 独立于数据库的用户视图，即外模式
- 独立于具体的存储设备
- 将全局逻辑结构中所定义的数据结构及其联系按照一定的物理存储策略进行组织，以达到较好的时间与空间效率

- 内模式是数据物理结构和存储方式的描述

- 内模式是数据在数据库内部的表示方式 

    一个数据库只有一个内模式

    - 记录的存储方式（例如，顺序存储，按照B树结构存储， 按hash方法存储等）
    - 索引的组织方式
    - 数据是否压缩存储
    - 数据是否加密
    - 数据存储记录结构的规定

- 

三级模式是对数据的三个抽象级别

## 3. 数据库的二级映像功能与数据独立性

二级映象在数据库管理系统内部实现这三个抽象层次的联系和转换

外模式／模式映像、模式／内模式映像

**二级映像的作用：**

- 保证了数据库外模式的稳定性
- 从底层保证了应用程序的稳定性，除非应用需求本身发生变化，否则应用程序一般不需要修改

### （1）外模式／模式映像

- 模式
    - 描述的是数据的全局逻辑结构
- 外模式
    - 描述的是数据的局部逻辑结构
- 同一个模式可以有任意多个外模式
- 每一个外模式，数据库系统都有一个外模式／模式映象，定义外模式与模式之间的对应关系
- 映象定义通常包含在各自外模式的描述中
- 外模式/模式保证数据的逻辑独立性

### （2）模式／内模式映像

- 模式／内模式映象定义了数据全局逻辑结构与存储结构之间的对应关系。
- 例如，说明逻辑记录和字段在内部是如何表示的，数据库中模式／内模式映象是唯一的该映象定义通常包含在模式描述中
- 模式/内模式映像保证数据的物理独立性

# **四、数据库系统的组成**

- 数据库
- 数据库管理系统（及其开发工具）
- 应用程序
- 数据库管理员