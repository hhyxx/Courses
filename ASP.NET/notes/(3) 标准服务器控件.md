

## 0.出现错误时的解决方案

### 1.  添加jquery

```plaintext
WebForms UnobtrusiveValidationMode 需要“jquery”ScriptResourceMapping。
请添加一个名为 jquery (区分大小写)的 ScriptRes 
```



+ 解决方法
  + 在Web.config文件中添加以下指令

``` c#
 <appSettings>
    <add key="ValidationSettings:UnobtrusiveValidationMode"value="None" />
  </appSettings>

```



## 1. 标准服务器控件

### 1.1. Button控件

+ `Button` ：普通按钮，可以设置`onclick`等各种事件
+ 引发服务器事件
  + 在回发至服务器后发生该设定的事件
+ 引发客户端事件
  + 在`JavaScript` 中编写
+ `HyperLink`：真正的超链接，连接到新的页面
+ `LinkButton`：一个超链接，通过按钮回发行为
+ `ImageButton`：图形按钮超链接



### 1.2. TextBox控件

----

+ TextMode 属性

  + `SingleLine`：单行文本框
  + `MultiLine`：多行文本框
  + `Password`：密码输入


```c#
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebSite5{
    public partial class example5_4 : System.Web.UI.Page{
         protected void Button1_Click(object sender, EventArgs e){
            //读取TextBox1控件的Text属性的值，并使用该值来设置TextBox2控件的Text属性的值。
            TextBox2.Text = Server.HtmlEncode(TextBox1.Text);
        }
          protected void Button2_Click(object sender, EventArgs e){
            if (TextBox3.Text ==" " || TextBox4.Text == ""){
               string scriptString = "alert('信息不全，请重新填写。'); ";               Page.ClientScript.RegisterClientScriptBlock(this.GetType(),"warning", scriptString, true);
             }
           else{
               Response.Redirect(string.Format("Content5-4.aspx?user={0}&password={1}",
             TextBox3.Text, TextBox4.Text));
             }
          }
    }
}
```

#### 1.2.1. 实现登录时显示用户信息

```c#
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebSite5{
    public partial class Content5_4 : System.Web.UI.Page{
        protected void Page_Load(object sender, EventArgs e){
        string scriptContent = Request.QueryString["user"].ToString() + "，欢迎您！请记住您的密码：" + Request.QueryString["password"].ToString();
        Response.Write(scriptContent);
        string scriptString = "alert('"+scriptContent+"');";
        Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "success", scriptString, true);  
        }
    }
}
```



### 1.3. ListBox 控件和 DropList 控件

----

+ ListBox —— 支持多重选择模式

  + SelectMode 
    + Single：只能选择单个选项
    + Multiple：可以选择多个选项

+ DropDownList

  + 不支持多重选择模式
  + 选项列表在用户单击下拉按钮之前一直保持隐藏状态

  

### 1.4. CheckBox 和 CheckBoxList

----

+ CheckBox 提供单个的选择按钮

+ CheckBoxList 提供一个 CheckBox 集合
  + 可以获得当前选择项的信息

``` c# 
for (int i=0 ; i<CheckBoxList1.Items.Count; i++){
  if(CheckBoxList1.Items[i].Selected){
    CheckBoxList1.Items[i].Text; // 获取当前选择按钮的文本
  }
}

// 字符串 EndsWith 方法 ，判断字符串是否以某一字符结尾
if (str.EndsWith("、") == true) str = str.Substring(0, str.Length - 1);
```



+ 按钮改变当前的显示风格

```c#
protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
{
  this.CheckBoxList1.BackColor =
    CheckBox1.Checked ? System.Drawing.Color.Beige : System.Drawing.Color.Azure;
  CheckBoxList1.RepeatDirection =
    CheckBox1.Checked ? RepeatDirection.Horizontal : RepeatDirection.Vertical;
}
```



+ 按钮改变字体颜色

``` c#
protected void CheckBox2_CheckedChanged(object sender, EventArgs e)
{
  if (CheckBox2.Checked)
  {
    this.CheckBoxList1.ForeColor = System.Drawing.Color.Red;
    Label1.ForeColor = System.Drawing.Color.Red;
  }
  else
  {
    this.CheckBoxList1.ForeColor = System.Drawing.Color.Black;
    Label1.ForeColor = System.Drawing.Color.Black;
  }
}
```



### 1.5. Image 和 ImageMap 控件

---







## 2. 验证控件

----

### 2.1.  非空验证

+ 在`.apsx`的html页面中添加

```html
<asp:RequiredFieldValidator   
ID="当前验证程序的标识" 
runat="server" 
ErrorMessage="验证不同过后显示的信息！" 
ControlToValidate="指明需要验证的控件的id" 
CssClass="auto-style1" 
Display="Dynamic"  <!--只有在显示错误时显示该控件的值!-->
ValidationGroup="AllValidators">
* <!-- 当前控件的text * 表示是必填的，只有出现错误时候才显示该文本!-->

</asp:RequiredFieldValidator>
```



### 2.2. 比较验证

```html
<asp:TextBox ID="TextBoxPassword"  runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" 
    ControlToValidate="TextBoxPassword" ErrorMessage="密码不能为空！" 
    Display="Dynamic" CssClass="auto-style1">密码不能为空！
</asp:RequiredFieldValidator> <br />
&nbsp;*确认密码：
<asp:TextBox ID="TextBoxPasswordConfirm" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" 
    ControlToValidate="TextBoxPasswordConfirm" ErrorMessage="密码不能为空！" 
    Display="Dynamic" CssClass="auto-style1">密码不能为空！
</asp:RequiredFieldValidator> <br /><br />
<asp:CompareValidator ID="CompareValidator1" runat="server" 
    ControlToCompare="TextBoxPassword"  ControlToValidate="TextBoxPasswordConfirm" 
    ErrorMessage="密码不一致，重新输入。" Display="Dynamic" CssClass="auto-style1">密码不一致，重新输入。
</asp:CompareValidator>
```





### 2.3. 正则表达式验证控件

+ ValidationExpression :  给出待匹配的正则表达式字符串

```html
 <asp:RegularExpressionValidator ID="RegularExpressionValidator1" 
runat="server" 
ErrorMessage="邮件地址错误！" 
ControlToValidate="textEmail" 
CssClass="auto-style1" 
Display="Dynamic" 
ValidationGroup="AllValidators" 
ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"> 
无效格式！ <!--验证不通过后在该控件位置处显示的信息!-->
</asp:RegularExpressionValidator>
```



+ 邮箱正则表达式匹配

```c#
^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$
```



### 2.4. 数据范围验证控件

+ 属性间以空格为距
+ Type 属性先将值定为int 然后才能验证数据的范围

```html
<asp:RangeValidator 
ID="RangeValidator1" 
runat="server" 
ControlToValidate="被验证控件的id"  
Display="Dynamic" 
MaximumValue="20" 
MinimumValue="1" 
ErrorMessage="为团队人数输入一个介于 1 和 20 之间的数字" 
ValidationGroup="AllValidators" 
Type="Integer"  
Text="输入一个介于1和20之间的数字">
</asp:RangeValidator>
```

### 2.5. 用户定义验证控件

----

+ HTML 端的

```html
<asp:CustomValidator 
ID="CustomValidator1" 
runat="server" 
ErrorMessage="以yyyy-m-d格式输入一个日期&quot;" 
ControlToValidate="textPreferredDate" 
CssClass="auto-style1" 
Display="Dynamic" 
ValidationGroup="AllValidators"  
EnableClientScript="False" 
OnServerValidate="CustomValidator1_ServerValidate" >
无效日期格式(需要yyyy-m-d)
</asp:CustomValidator>
```

+ 自定义的验证程序

``` c#
protected void CustomValidator1_ServerValidate(object source, ServerValidateEventArgs args){
  try{
    DateTimeFormatInfo info1 = (DateTimeFormatInfo)      Thread.CurrentThread.CurrentCulture.GetFormat(typeof(DateTimeFormatInfo));
    DateTime time1 = DateTime.ParseExact(args.Value, "d", info1,                                         DateTimeStyles.AllowWhiteSpaces);
    args.IsValid = true;
  }
  catch{
    args.IsValid = false;
  }
}
```



### 2.6. 将所有文本框置空

----



``` c#

foreach (Control c in this.FindControl("form1").Controls){
  if (c is TextBox){
    ((TextBox)c).Text = "";
  }
}
```

